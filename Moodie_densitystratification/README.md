This file documents the source code used in processing and analysis for "Suspended-sediment induced stratification inferred from concentration and velocity profile measurements in the flooding lower Yellow River, China." (Moodie et al., in prep.). 

<img src="./private/alpha_data_plots.png" alt="Concentration profile adjustment" width="600" align="middle">

## Manuscript
The manuscript detailing this analysis is in preparation for WRR:
```
Moodie, Andrew J., Jeffrey A. Nittrouer, Hongbo Ma, Brandee N. Carlson, Yuanjian Wang,
Michael P. Lamb, and Gary Parker (in preparation). "Suspended-sediment induced stratification inferred from concentration and velocity profile measurements in the flooding lower Yellow
River, China." In: Water Resources Research.
```

A preprint of the manuscript and supplement is available [from EarthArXiv](https://eartharxiv.org/rmhx4/).


## Unprocessed data
The data can be found [on Zenodo](https://zenodo.org/record/3457639).
If you use these data, please cite the Zenodo dataset.

The scripts included in this repository process this data, and produce all of the plots (and many more) in the manuscript.


## Processing code
The processing code works by operating four files in the following sequence:
1. MakeDataTable.m
2. MakeStratModels.m
3. ExploreDataTable.m
4. MakeSelectedPlots.m


## Post-processed dataset
Included with this repository are several postprocessed datasets, required to run the script.
If you use these data, please cite this manuscript, and the [Zenodo dataset](https://zenodo.org/record/3457639).

The file `data/toSelectedPlots.mat` contains the Yellow River data, processed for running the script `MakeSelectedPlots.m`.
Other datasets needed for this script are also included in `data/`.

The container `data/toSelectedPlots.mat` has structures inside:

* `bed`
* `df`
* `entr`
* `idx`
* `jt`
* `mods`
* `nearbed`
* `reg`
* `sdif`
* `station`

See a complete description of these structures at [`data_description.md`](data_description.md).

Additional structures included in `data` are:

* `wright_dissertation_combined.mat` which is loaded into the script as `WP`
* `stratificationFieldDataParameterSpace.mat`


## Acknowledgments and disclaimer
The data were generated by Andrew J. Moodie and others as part of an National Science Foundation funded research project assessing the sustainability of anthropogenically influenced deltas.
The research is supported by Grant No. 1427262, and an NSF Graduate Research Fellowship to A.J.M. under Grant No. 1450681.
Any opinion, findings, and conclusions or recommendations expressed in this material are those of the author(s) and do not necessarily reflect the views of the National Science Foundation.
The author(s) guarantee no warranty or technical support for this repository.
